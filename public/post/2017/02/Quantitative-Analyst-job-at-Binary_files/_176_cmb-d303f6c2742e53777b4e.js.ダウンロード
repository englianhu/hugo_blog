webpackJsonp([168],{595:function(t,e,o){var r=function(t,e){function o(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},n={}.hasOwnProperty;void(t.exports=Promise.all([Promise.resolve().then(o.bind(null,1)),Promise.resolve().then(o.bind(null,12)),Promise.resolve().then(o.bind(null,5)),Promise.resolve().then(o.bind(null,18)),o.e(0).then(o.bind(null,474)),o.e(34).then(o.bind(null,510)),o.e(42).then(o.bind(null,517)),Promise.resolve().then(o.bind(null,13)),Promise.resolve().then(o.bind(null,7)),o.e(24).then(o.bind(null,500)),o.e(44).then(o.bind(null,519)),o.e(163).then(o.bind(null,700)),o.e(26).then(o.bind(null,526)),o.e(39).then(o.bind(null,567)),o.e(3).then(o.bind(null,580)),o.e(28).then(o.bind(null,577)),o.e(3).then(o.bind(null,605)),o.e(31).then(o.bind(null,511)),o.e(1).then(o.bind(null,527)),o.e(23).then(o.bind(null,501)),Promise.resolve().then(o.bind(null,8)),o.e(26).then(o.bind(null,545))]).then(function(){return function(t,e,o,n,i,l,s,a,c,u,p,h,d,f,_,y,m,g,b,j){var w,v,$,k,C,x,T,P,F,z;return z=o.extend({},e.Events),x="projectUpdated",$="projectCreated",k="projectDeleted",C="projectDrafted",t.facybox.settings.modal=!0,v=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={click:"_toggleLike"},o.prototype.initialize=function(t){return this.isLiked="liked"===this.$el.data("liked"),this.likesUrl=this.$el.data("url"),this.projectId=t.projectId},o.prototype._toggleLike=function(){var e;return t.post(this.likesUrl,{type:"Project",id:this.projectId,action_type:this.isLiked?"destroy":"create"}),this.isLiked=!this.isLiked,e=Number(this.$(".js-like-count").text()),this.isLiked?(this.$(".js-heart").addClass("u-colorError"),this.$(".js-like-count").text(e+1)):(this.$(".js-heart").removeClass("u-colorError"),this.$(".js-like-count").text(e-1))},o}(e.View),T=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events=function(){return{"click .js-edit-link":"editProject","click .js-add-collaborator":"_onAddCollaboratorClick"}},o.prototype.initialize=function(){return new v({el:this.$(".js-like"),projectId:this.$el.data("id")})},o.prototype.editProject=function(){return t.facybox({ajax:this.$el.data("edit-url")})},o.prototype._onAddCollaboratorClick=function(){return null!=i&&i.track("projects: click add collaborator on profile"),t.facybox({ajax:this.$el.data("new-collaborator-url")})},o}(e.View),P=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.initialize=function(t){return n.__super__.initialize.call(this,o.extend(t,{container:this.$(".js-collaborators-association-container")})),this.delayedPersist=t.delayedPersist,this.$(this.input()).attr("autocomplete","country chromehack")},n.prototype._keypress=function(t){},n.prototype.addAssociation=function(t){return this.delayedPersist?this.collection.add(t):n.__super__.addAssociation.apply(this,arguments)},n.prototype._select=function(e){return e.unmatched?(t(this.input()).val(""),this.trigger("selectUnmatched",e.query)):n.__super__._select.apply(this,arguments)},n}(l.CollaboratorTaggingField),w=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,n),i.prototype.SUBMIT_SELECTOR=".js-submit-collaborator",i.prototype.events=function(){return o.extend(i.__super__.events.apply(this,arguments),{"click .js-cancel-new-collaborator":"_closeForm"})},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,o.extend(t,{formEl:this.$(".js-new-collaborator")})),this.taggerClass=t.taggerClass||P,this.collaborationType=this.$el.data("collaboration-type"),this.delayedPersist=this.$el.data("delayed-persist"),this._initializeModel(),this._initializeCollection(),this._initializeTagger()},i.prototype._showForm=function(t){return t&&this.$(".js-new-collaborator-name").val(t),this.tagger.$el.find("input").hide(),this._form().slideDown("fast",function(t){return function(){return t.$(".js-new-collaborator-email").focus()}}(this))},i.prototype._closeForm=function(){return this.tagger.$el.find("input").show(),t(this.tagger.input()).focus(),this._form().slideUp("fast"),this._resetForm()},i.prototype._resetForm=function(){return this._form().find("input").val("")},i.prototype._submit=function(){return this.form.removeErrors(),i.__super__._submit.apply(this,arguments)},i.prototype._submitForm=function(t){var e,o,r;return r=this.$(".js-new-collaborator-name").val(),o=this.$(".js-new-collaborator-email").val(),e=new y({collaboration_id:this.model.id,collaboration_type:this.collaborationType,invited_name:r,invited_email:o,collaborator_to_s:r}),this.delayedPersist?this._handleSuccess(e):e.save(null,{success:function(){return t.success(e)},error:function(e,o){return t.error(o)}})},i.prototype._handleSuccess=function(t){return i.__super__._handleSuccess.apply(this,arguments),this.collection.add(t),this._closeForm()},i.prototype._initializeModel=function(){var t;return t=function(){switch(this.collaborationType){case"Project":return f;case"JobListing":return m;case"NewTagging":return g;case"Degree":return b}}.call(this),this.model=new t({id:this.$el.data("collaboration-id")})},i.prototype._initializeCollection=function(){return this.collection=new e.Collection([],{model:y}),this.collection.add(this.$el.data("collaborator-taggings")),this.listenTo(this.collection,"add remove",function(t){return function(){return t.$el.data("collaborator-taggings",t.collection.toJSON())}}(this))},i.prototype._initializeTagger=function(){return this.tagger=new this.taggerClass({el:this.$(".js-collaborator-autocomplete"),model:this.model,collection:this.collection,unmatched:!0,delayedPersist:this.delayedPersist}),this.listenTo(this.tagger,"selectUnmatched",function(t){return function(e){return t._showForm(e)}}(this))},i.prototype._keyDown=function(t){return 13===t.keyCode&&this.$(t.target).is(".js-new-collaborator-email")?this._submit():i.__super__._keyDown.apply(this,arguments)},i}(p.SimpleForm),F=function(e,o,r){return o?t.ajax({url:o,type:"post",success:function(){return r()}}):new y({id:e}).destroy({success:function(){return r()}})},{show:function(o,n){var i;return new(i=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-edit-link":"editProject","click .js-comments-button":"scrollToComments"},o.prototype.initialize=function(){return this.projectId=this.$el.data("id"),this.listenTo(z,x,function(t){return function(t){return window.location.reload()}}(this)),this.listenTo(z,k,function(t){return function(e){if(t.$el.data("back-url"))return window.location=t.$el.data("back-url")}}(this)),new v({el:this.$(".js-like-link"),projectId:this.projectId})},o.prototype.editProject=function(){return t.facybox({ajax:this.$el.data("edit-url")})},o.prototype.scrollToComments=function(){var e,o;if(e=this.$(".js-comments-heading").offset())return o=e.top,t("html, body").animate({scrollTop:o},200)},o}(e.View))({el:n})},profile_show:function(e,n){var i;return new(i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.events=function(){return o.extend(n.__super__.events.apply(this,arguments),{"click .js-confirm-link":"_onConfirmClick","click .js-delete-link":"_onDeleteClick"})},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(z,k,function(t){return function(e){if(e===t.$el.data("id"))return t._onDelete()}}(this))},n.prototype._onDeleteClick=function(){return F(this.$el.data("collaborator-tagging-id"),this.$el.data("destroy-url"),function(t){return function(){return t._onDelete()}}(this))},n.prototype._onDelete=function(){return this.$el.slideUp("fast",function(t){return function(){return t.remove()}}(this))},n.prototype._onConfirmClick=function(t){return this.$(t.target).addClass("c-button--loading"),this._confrmTagging(function(t){return function(){return t.$(".js-confirm-controls").hide(),t.$(".js-edit-controls").show(),t.editProject()}}(this))},n.prototype._confrmTagging=function(e){return t.ajax({url:this.$el.data("confirm-url"),type:"post",success:function(t){return e()}})},n}(T))({el:n})},collaborator_form:function(t,e){return new w({el:e})},big_collaborator_form:function(t,e){var o;return o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.tpl=t(".js-collaborator-tpl").html().trim(),o.prototype.renderAssociation=function(t){return d.render(this.tpl,{url:t.get("collaborator_slug_url"),name:t.get("collaborator_to_s"),avatar:t.get("collaborator_avatar")})},o}(P),new w({el:e,taggerClass:o})},collaborator_details_form:function(e,o){var n;return new(n=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"change .js-date-select":"_onDateSelectChange"},o.prototype.initialize=function(){return this._onDateSelectChange()},o.prototype._onDateSelectChange=function(){var e,o,r,n,i;for(r=this.$(".js-date-select"),n=[],e=0,o=r.length;e<o;e++)i=r[e],n.push(t(i).parent().next().toggle(""!==t(i).val()));return n},o.prototype.render=function(){return o.__super__.render.apply(this,arguments),this.$container.toggle(this.collection.length>0)},o}(p.PartialForm))({el:o})},form:function(e,n){var l,u;return u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.initialize=function(t){return this.associationTemplate=t.associationTemplate,this.warning=t.warning,e.__super__.initialize.apply(this,arguments)},e.prototype.removeAssociation=function(t){var o;return e.__super__.removeAssociation.apply(this,arguments),null!=(o=this.warning)?o.show():void 0},e.prototype.renderAssociation=function(t){var e,r;return null!=(r=this.warning)&&r.hide(),e={name:t.get("company_name"),url:t.get("slug_url"),photo:t.get("logo_url"),allowDelete:this.isEditable()},o.template(this.associationTemplate.trim(),e,{interpolate:/\{\{(.+?)\}\}/g})},e}(s.StartupField),new(l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.events=function(){return o.extend(n.__super__.events.apply(this,arguments),{"click .js-cancel":"_onCancel","click .js-delete":"_onDelete","click .js-edit-details":"_onEditDetails"})},n.prototype.initialize=function(){return this.focus(),this.draft=this.$el.data("draft"),this.projectId=this.$el.data("id"),this.form=new p.PartialForm({el:this.$(".js-project-form")}),this._initializeStartupField(),this._trackCollaboratorCount()},n.prototype.focus=function(){var e,o,r,n,i,l;for(i=this.$('textarea,input[type="text"]').filter(":visible"),l=[],o=0,n=i.length;o<n;o++)if(r=i[o],e=t(r),!(e.val().trim().length>0)){e.focus();break}return l},n.prototype._initializeStartupField=function(){var t;if((t=this.$(".js-startup-tagger")).length>0)return new u({el:t,associationTemplate:this.$(".js-startup-template").html()})},n.prototype._submit=function(){return this.form.removeErrors(),this.$el.data("require-collaborators")&&this.collaboratorCount<=0?(this.form._setInputError(this.$(".js-collaborator-form"),this.$el.data("no-collaborators-error")),this.form.scrollToErrors()):(n.__super__._submit.apply(this,arguments),this._toggleCancelLink(!1))},n.prototype._handleSuccess=function(e){return t.facybox.close(),z.trigger(this.draft?$:x,this.projectId),this.draft&&null!=i&&i.track("projects: created new"),n.__super__._handleSuccess.apply(this,arguments)},n.prototype._handleError=function(t){return n.__super__._handleError.apply(this,arguments),this._toggleCancelLink(!0),this.form.handleErrors(t),this.form.scrollToErrors()},n.prototype._form=function(){return this.$(".js-form")},n.prototype._onCancel=function(){return t.facybox.close()},n.prototype._onDelete=function(){if(confirm(this.$el.data("destroy-confirm")))return t.facybox.close(),F(this.$el.data("collaborator-tagging-id"),this.$el.data("destroy-url"),function(t){return function(){return z.trigger(k,t.projectId)}}(this))},n.prototype._onEditDetails=function(e){return t(e.target).hide(),this.$(".js-project-form").slideDown()},n.prototype._toggleCancelLink=function(t){return this.$(".js-cancel").toggle(t)},n.prototype._trackCollaboratorCount=function(){return this.collaboratorCount=0,c["with"](this._collaboratorForm(),function(t){return function(e){return t.collaboratorCount=e.collection.length,t.listenTo(e.collection,"add remove",function(){if(t.collaboratorCount=e.collection.length,t.collaboratorCount>0)return a.clearInputError(t.$(".js-collaborator-form"))})}}(this))},n.prototype._collaboratorForm=function(){var t;return t=this.$(c.selector("projects/collaborator_form")),t.length>0?t:this.$(c.selector("projects/big_collaborator_form"))},n}(p.FormContainer))({el:n})},display:function(o,n){var l;return o(".tiptip").qtip(),o(".screenshots").magnificPopup({delegate:".screenshot",type:"image",gallery:{enabled:!0}}),new(l=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-add-collaborator":"_onAddCollaboratorClick"},o.prototype._onAddCollaboratorClick=function(){return null!=i&&i.track("projects: click add collaborator on profile"),t.facybox({ajax:this.$el.data("new-collaborator-url")})},o}(e.View))({el:n})},profile:function(o,n){var i;return new(i=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.initialize=function(){return this.listenTo(z,x,function(t){return function(e){return t.reload(e)}}(this)),this.listenTo(z,$,function(t){return function(e){return t.reload(e,!0),t.reloadProfileCompleteness()}}(this)),this.reloadUrl=this.$el.data("reload-url")},o.prototype.reload=function(e,o){return t.ajax({url:this.reloadUrl,dataType:"json",success:function(t){return function(r){if(t.$(".js-projects-container").html(r.html),o)return t._scrollToProject(e)}}(this)})},o.prototype.reloadProfileCompleteness=function(){var e;if(e=t(c.selector("profiles/show/completeness")),e.length)return c["with"](e,function(t){return t.reload("projects")})},o.prototype._scrollToProject=function(e){var o,r,n,i,l;for(i=t(c.selector("projects/show")),l=[],r=0,n=i.length;r<n;r++){if(o=i[r],t(o).data("id")===e){t("html, body").animate({scrollTop:t(o).offset().top-100},200);break}l.push(void 0)}return l},o}(e.View))({el:n})},add:function(e,n){var l;return new(l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.events=function(){return o.extend(n.__super__.events.apply(this,arguments),{"focus .js-title":"_onFocus","click .js-cancel":"_resetForm"})},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.userId=this.$el.data("user-id")},n.prototype._submitForm=function(t){return this._withCollaboratorCollection(function(e){return function(r){return e._form().ajaxSubmit(o.extend(t,{data:{collaborators_json:r.toJSON()}}))}}(this))},n.prototype._handleSuccess=function(e){return n.__super__._handleSuccess.apply(this,arguments),null!=i&&i.track("projects: show draft"),t.facybox(e.html),this._resetForm()},n.prototype._focus=function(){return this.$('input[type="text"]').first().focus()},n.prototype._onFocus=function(){return null!=i&&i.track("projects: focused on title input"),this.$(".js-project-details").slideDown("fast")},n.prototype._resetForm=function(){return this.$('input[type="text"]').val(""),this.$(".js-project-details").slideUp("fast"),this._withCollaboratorCollection(function(t){return t.reset()})},n.prototype._withCollaboratorCollection=function(t){return c["with"](this.$(c.selector("projects/collaborator_form")),function(e){return t(e.collection)})},n}(p.SimpleForm))({el:n})},add_launch:function(e,o){var n;return new(n=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype._handleSuccess=function(e){return o.__super__._handleSuccess.apply(this,arguments),z.trigger(C),null!=i&&i.track("launches: show draft"),t.facybox(e.html),this._resetForm()},o.prototype._resetForm=function(){return this.$('input[type="text"]').val("")},o.prototype._keyDown=function(t){return 13===t.keyCode?this._submit():o.__super__._keyDown.apply(this,arguments)},o}(p.SimpleForm))({el:o})},image_upload:function(t,o){var r;return r=new e.Collection([],{model:_}),new h.ScreenshotUploader({el:t(".js-screenshot-uploader"),url:o.data("upload-url"),collection:r,screenshotUploadTemplate:t(".js-upload-tpl").html()}),new h.ScreenshotManager({el:t(".js-screenshot-manager"),collection:r,screenshotViewTemplate:t(".js-screenshot-tpl").html(),sortable:!0}).on("reordered",function(t){return new f({id:o.data("id")}).save({image_locations:t.join(",")},{patch:!0})})},new_collaborators:function(o,n){var i;return new(i=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-close":"_onCloseClick"},o.prototype.initialize=function(){return this.projectId=this.$el.data("project-id"),this.focus()},o.prototype.focus=function(){return c["with"](this.$(c.selector("projects/collaborator_form")),function(t){return t.$el.find("input").focus()})},o.prototype._onCloseClick=function(){return t.facybox.close(),z.trigger(x,this.projectId)},o}(e.View))({el:n})},launches:function(o,n){var i;return new(i=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.events={"click .js-show-all-launches":"showAllLaunches"},o.prototype.initialize=function(){if(this.reloadUrl=this.$el.data("reload-url"),this.listenTo(z,x+" "+$,function(t){return function(e){return t.reload(e)}}(this)),this.listenTo(z,k,function(t){return function(e){return t._removeRow(e)}}(this)),this.$el.data("highlighted-launch-id"))return this.highlightLaunch(this.$el.data("highlighted-launch-id"))},o.prototype.reload=function(e){return t.ajax({url:this.reloadUrl,dataType:"json",data:{launch_id:e},success:function(t){return function(e){return t.$el.parent().append(e.html),t.remove()}}(this)})},o.prototype.showAllLaunches=function(){return this.$(".js-show-all-launches").parent().hide(),this.$(".js-launch-row").show()},o.prototype.highlightLaunch=function(e){var o;if(o=this._rowElement(e),o.is(":visible")||this.showAllLaunches(),!o.is(":appeared"))return t("html, body").animate({scrollTop:o.offset().top-100},200)},o.prototype._rowElement=function(t){return this.$(".js-launch-row[data-id='"+t+"']")},o.prototype._removeRow=function(t){var e;return e=this._rowElement(t),e.slideUp("fast",function(t){return function(){return c["with"](e.find(c.selector("projects/launch_row")),function(t){return t.remove()})}}(this))},o}(e.View))({el:n})},launch_row:function(t,e){return new T({el:e})},events:function(){return z}}}.apply(void 0,arguments[0])}.bind(this)))}});